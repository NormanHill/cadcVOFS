<?xml version="1.0" encoding="UTF-8"?>
<xs:schema targetNamespace="http://www.ivoa.net/xml/VOSpace/v2.0" elementFormDefault="qualified"
    attributeFormDefault="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:vos="http://www.ivoa.net/xml/VOSpace/v2.0" xmlns:uws="http://www.ivoa.net/xml/UWS/v1.0" xmlns:xlink="http://www.w3.org/1999/xlink">
  <xs:import namespace="http://www.ivoa.net/xml/UWS/v1.0" schemaLocation="http://www.ivoa.net/xml/UWS/v1.0"/>

  <!-- ======== Node types ======== -->

  <xsd:complexType name="NodeType">
    <xsd:annotation>
      <xsd:documentation>
        The base class for all nodes.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="properties" type="vos:PropertyListType" minOccurs="0" maxOccurs="1">
        <xsd:annotation>
          <xsd:documentation>
            The list of node properties.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="uri" type="xsd:anyURI" use="required">
      <xsd:annotation>
        <xsd:documentation>
          The node identifier URI.
        </xsd:documentation>
      </xsd:annotation>
    </xsd:attribute>
  </xsd:complexType>

  <xsd:complexType name="DataNodeType">
    <xsd:annotation>
      <xsd:documentation>
        The base class for data nodes.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:complexContent>
      <xsd:extension base="vos:NodeType">
        <xsd:sequence>
          <xsd:element name="accepts" type="vos:ViewListType" minOccurs="0" maxOccurs="1">
            <xsd:annotation>
              <xsd:documentation>
                The list of views or data formats that this node can accept.
                A simple unstructured node may accept data in any format.
                A structured node may only accept data in specific formats.
              </xsd:documentation>
            </xsd:annotation>
          </xsd:element>
          <xsd:element name="provides" type="vos:ViewListType" minOccurs="0" maxOccurs="1">
            <xsd:annotation>
              <xsd:documentation>
                The list of views or data formats that this node can provide.
                A simple unstructured node may only provide access to the data in the original format.
                A structured node may provide different views of the data generated by the service.
              </xsd:documentation>
            </xsd:annotation>
          </xsd:element>
	  <xsd:element name="capabilities" type="vos:CapabilityListType" minOccurs="0" maxOccurs="1">
	    <xsd:annotation>
	      <xsd:documentation>
	        The list of capabilities that this node can support.
	      </xsd:documentation>
            </xsd:annotation>
          </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="busy" type="xsd:boolean" use="optional" default="false">
          <xsd:annotation>
            <xsd:documentation>
              A flag to indicate if the node content is available.
              This will be set to false while the data is being imported,
              or if the underlying service is busy.
            </xsd:documentation>
          </xsd:annotation>
        </xsd:attribute>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>

  <xsd:complexType name="UnstructuredDataNodeType">
    <xsd:annotation>
      <xsd:documentation>
        An unstructured data node, containing unspecified content.
        The service does not need to understand or interpret the content.
        This type of node can accept any format, and only provides one view returning the original data.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:complexContent>
      <xsd:extension base="vos:DataNodeType"/>
    </xsd:complexContent>
  </xsd:complexType>

  <xsd:complexType name="StructuredDataNodeType">
    <xsd:annotation>
      <xsd:documentation>
        A structured data node, containing a specific data format that the service has understands.
        This type of node may only accept specific data formats, and provide different views of the
        data generated by the service.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:complexContent>
      <xsd:extension base="vos:DataNodeType"/>
    </xsd:complexContent>
  </xsd:complexType>

  <xsd:complexType name="ContainerNodeType">
    <xsd:annotation>
      <xsd:documentation>
        A container node containing any type of node.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:complexContent>
      <xsd:extension base="vos:DataNodeType">
        <xsd:sequence>
          <xsd:element name="nodes" minOccurs="1" maxOccurs="1">
            <xsd:annotation>
              <xsd:documentation>
                A list of the direct children that the container has.
              </xsd:documentation>
            </xsd:annotation>
            <xsd:complexType>
	      <xsd:sequence>
                <xsd:element name="node" type="vos:NodeType" minOccurs="0" maxOccurs="unbounded">
	          <xsd:attribute name="uri" type="xsd:anyURI" use="required">
		    <xsd:annotation>
		      <xsd:documentation>
		        The node identifier URI.
	              </xsd:documentation>
		    </xsd:annotation>
		  </xsd:attribute>
	        </xsd:element>
	      </xsd:sequence>
	    </xsd:complexType>
          </xsd:element>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>

  <xsd:complexType name="LinkNodeType">
    <xsd:annotation>
      <xsd:documentation>
        A node that points to another resource.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:complexContent>
      <xsd:extension base="vos:NodeType">
	<xsd:sequence>
          <xsd:element name="target" type="xsd:anyURI" minOccurs="1" maxOccurs="1">
            <xsd:annotation>
              <xsd:documentation>
                The identifier for the object that the LinkNode points to.
              </xsd:documentation>
            </xsd:annotation>
          </xsd:element>
	</xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>

  <!-- ======== Property types ======== -->

  <xsd:complexType name="PropertyType">
    <xsd:simpleContent>
      <xsd:extension base="xsd:string">
        <xsd:attributeGroup ref="vos:PropertyAttributeGroup"/>
      </xsd:extension>
    </xsd:simpleContent>
  </xsd:complexType>

  <xsd:complexType name="PropertyListType">
    <xsd:annotation>
      <xsd:documentation>
        A container element for a list of properties.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="property" type="vos:PropertyType" minOccurs="0" maxOccurs="unbounded" nillable="true"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="PropertyReferenceType">
    <xsd:annotation>
      <xsd:documentation>
        A reference to a property description, used in getProperties()
      </xsd:documentation>
    </xsd:annotation>
    <xsd:attributeGroup ref="vos:PropertyAttributeGroup"/>
  </xsd:complexType>

  <xsd:complexType name="PropertyReferenceListType">
    <xsd:annotation>
      <xsd:documentation>
        A container element for a list of property references.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="property" type="vos:PropertyReferenceType" minOccurs="0" maxOccurs="unbounded" nillable="true"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="GetPropertiesResponseType">
    <xsd:sequence>
      <xsd:element name="accepts" type="vos:PropertyReferenceListType">
        <xsd:annotation>
          <xsd:documentation>
            A list of identifiers for the properties that the service accepts and understands.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="provides" type="vos:PropertyReferenceListType">
        <xsd:annotation>
          <xsd:documentation>
            A list of identifiers for the properties that the service provides.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="contains" type="vos:PropertyReferenceListType">
        <xsd:annotation>
          <xsd:documentation>
            A list of identifiers for all the properties currently used by nodes within the service.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>

  <!-- ======== View types ======== -->

  <xsd:complexType name="ParamType">
    <xsd:annotation>
      <xsd:documentation>
        A view or protocol parameter.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:simpleContent>
      <xsd:extension base="xsd:string">
        <xsd:attribute name="uri" type="xsd:anyURI" use="required"/>
      </xsd:extension>
    </xsd:simpleContent>
  </xsd:complexType>

  <xsd:complexType name="ViewType">
    <xsd:annotation>
      <xsd:documentation>
        An element describing a view of a data-set.
        A view may just provide the original data, or it could be server generated.
        Examples of server generated views could include a votable view of data in a database table,
        or a conversion from one image format to another.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="param" type="vos:ParamType" minOccurs="0" maxOccurs="unbounded" nillable="true">
        <xsd:annotation>
          <xsd:documentation>
            A list of parameters for the view.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="uri" type="xsd:anyURI" use="required">
      <xsd:annotation>
        <xsd:documentation>
          The view URI.
          This should point to a resource describing the view format and what parameters it requires.
        </xsd:documentation>
      </xsd:annotation>
    </xsd:attribute>
    <xsd:attribute name="original" type="xsd:boolean" use="optional" default="true">
      <xsd:annotation>
        <xsd:documentation>
          A flag to indicate if the view provides access to the original data content or a derived form.
        </xsd:documentation>
      </xsd:annotation>
    </xsd:attribute>
  </xsd:complexType>

  <xsd:complexType name="ViewListType">
    <xsd:annotation>
      <xsd:documentation>
        A container element for a list of views.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="view" type="vos:ViewType" minOccurs="0" maxOccurs="unbounded" nillable="true"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="GetViewsResponseType">
    <xsd:sequence>
      <xsd:element name="accepts" type="vos:ViewListType">
        <xsd:annotation>
          <xsd:documentation>
            A list of identifiers for the views that the service can accept.
            A simple file based system may accept data in 'any' format.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="provides" type="vos:ViewListType">
        <xsd:annotation>
          <xsd:documentation>
            A list of identifiers for the views that the service can provide.
            A simple file based system may only provide data in the original format.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>

  <!-- ======== Protocol types ======== -->

  <xsd:complexType name="ProtocolType">
    <xsd:annotation>
       <xsd:documentation>
         A protocol element, containing the protocol URI, the endpoint and any protocol specific parameters.
        </xsd:documentation>
      </xsd:annotation>
      <xsd:sequence>
        <xsd:element name="endpoint" type="xsd:anyURI" minOccurs="0" maxOccurs="1">
          <xsd:annotation>
            <xsd:documentation>
              The target endpoint to use for a data transfer.
            </xsd:documentation>
          </xsd:annotation>
        </xsd:element>
        <xsd:element name="param" type="vos:ParamType" minOccurs="0" maxOccurs="unbounded" nillable="true">
          <xsd:annotation>
            <xsd:documentation>
              Any additional protocol specific parameters required to use the endpoint.
              For example, the user name or password to use for ftp access.
            </xsd:documentation>
          </xsd:annotation>
        </xsd:element>
      </xsd:sequence>
      <xsd:attribute name="uri" type="xsd:anyURI" use="required">
      <xsd:annotation>
        <xsd:documentation>
          The protocol identifier.
        </xsd:documentation>
      </xsd:annotation>
    </xsd:attribute>
  </xsd:complexType>

  <xsd:complexType name="ProtocolListType">
    <xsd:annotation>
      <xsd:documentation>
        A container element for a list of protocols.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="protocol" type="vos:ProtocolType" minOccurs="0" maxOccurs="unbounded" nillable="true"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name="GetProtocolsResponseType">
    <xsd:sequence>
      <xsd:element name="accepts" type="vos:ProtocolListType">
        <xsd:annotation>
          <xsd:documentation>
            A list of identifiers for the protocols that the service can accept.
            This means that the service can act as a client for the protocol.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="provides" type="vos:ProtocolListType">
        <xsd:annotation>
          <xsd:documentation>
            A list of identifiers for the protocols that the service can provide.
            This means that the service can act as a server for the protocol.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>

  <!-- ======== Capability types ======== -->

  <xsd:complexType name="CapabilityType">
    <xsd:annotation>
      <xsd:documentation>
        A capability element, containing the capability URI, the
    endpoint and any capability specific parameters(?).
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="endpoint" type="xsd:anyURI" minOccurs="0" maxOccurs="1">
        <xsd:annotation>
          <xsd:documentation>
            The target endpoint to use for the third-part interface.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <!--+
             | Uncommented Capability params.
             +-->
      <xsd:element name="param" type="vos:ParamType" minOccurs="0" maxOccurs="unbounded" nillable="true">
        <xsd:annotation>
          <xsd:documentation>
            Any additional capability specific parameters required to use the endpoint.
            For example, the user name or password to use for access.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="uri" type="xsd:anyURI" use="required">
      <xsd:annotation>
        <xsd:documentation>
          The capability identifier.
        </xsd:documentation>
      </xsd:annotation>
    </xsd:attribute>
  </xsd:complexType>

  <xsd:complexType name="CapabilityListType">
    <xsd:annotation>
      <xsd:documentation>
        A container element for a list of capabilities.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="capability" type="vos:CapabilityType" minOccurs="0" maxOccurs="unbounded" nillable="true"/>
    </xsd:sequence>
  </xsd:complexType>

  <!-- ======== Node list type ======== -->

  <xsd:complexType name="NodeListType">
    <xsd:annotation>
      <xsd:documentation>
        A container element for search responses.
      </xsd:documentation<
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="nodes" minOccurs="0" maxOccurs="1">
        <xsd:annotation>
         The list of nodes.
	</xsd:annotation>
	<xsd:complexType>
	  <xsd:sequence>
	    <xsd:element name="node" type="vos:NodeType" minOccurs="0" maxOccurs="unbounded">
	      <xsd:annotation>
		<xsd:documentation>
	          At the maximum level of detail this will be replaced by the full element for the extended type, using xsi:type to indicate the node type/
		</xsd:documentation>
	      </xsd:annotation>
	    </xsd:element>
          </xsd:sequence>
	</xsd:complexType>
      </xsd:element>
    </xsd:sequence>
  </xsd:complexType>

  <!-- ======== Response representations ======== -->

  <xs:element name="protocols" type="vos:ProtocolListType"/>

  <xs:element name="views" type="vos:ViewListType"/>

  <xs:element name="properties" type="vos:PropertyListType"/>

  <xs:element name="transfer" type="vos:TransferType"/>

  <xs:element name="searchDetails" type="vos:NodeListType"/>
</xs:schema>
